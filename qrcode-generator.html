<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰¹é‡ç”ŸæˆäºŒç»´ç  - é«˜æ¥¼ç²‰å¹²</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs2@0.0.2/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        .config-section {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .config-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-generate {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-download-all {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        .btn-download-all:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .btn-print {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
        }

        .btn-print:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        .qrcode-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .qrcode-item {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .qrcode-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }

        .qrcode-wrapper {
            margin-bottom: 10px;
            background: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
        }

        .batch-code {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .qr-url {
            font-size: 11px;
            color: #999;
            word-break: break-all;
            margin-top: 8px;
            line-height: 1.4;
        }

        .btn-download {
            margin-top: 10px;
            padding: 8px 12px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .btn-download:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .info-box ul {
            list-style: none;
            padding-left: 0;
        }

        .info-box li {
            padding: 5px 0;
            color: #555;
        }

        .info-box li::before {
            content: "âœ“ ";
            color: #4caf50;
            font-weight: bold;
            margin-right: 5px;
        }

        .deploy-hint {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .deploy-hint strong {
            color: #856404;
            display: block;
            margin-bottom: 8px;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
            }
            .config-section,
            .btn-group,
            .info-box,
            .deploy-hint,
            button {
                display: none !important;
            }
            .qrcode-grid {
                display: grid;
                grid-template-columns: repeat(6, 1fr);
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ é«˜æ¥¼ç²‰å¹²äºŒç»´ç æ‰¹é‡ç”Ÿæˆå™¨</h1>
        <p class="subtitle">å¿«é€Ÿç”ŸæˆæŒ‡å‘ä½ çš„ç½‘é¡µçš„äº§å“æº¯æºäºŒç»´ç </p>

        <div class="deploy-hint">
            <strong>ğŸ’¡ éƒ¨ç½²æç¤º</strong>
            éƒ¨ç½²åˆ° Vercel åï¼Œè®°å¾—å°†ä¸‹æ–¹çš„"ç½‘é¡µåŸºç¡€åœ°å€"æ”¹ä¸ºä½ çš„ Vercel ç½‘å€ï¼ˆå¦‚ https://maya-gaolou.vercel.appï¼‰ï¼Œç„¶åé‡æ–°ç”ŸæˆäºŒç»´ç ï¼
        </div>

        <div class="info-box">
            <h3>ğŸ“Œ ä½¿ç”¨è¯´æ˜</h3>
            <ul>
                <li>è¾“å…¥ä½ çš„ç½‘é¡µåœ°å€ï¼ˆæœ¬åœ°æµ‹è¯•ç”¨æœ¬åœ°åœ°å€ï¼Œæ­£å¼ä½¿ç”¨ç”¨ Vercel åœ°å€ï¼‰</li>
                <li>ç‚¹å‡»"ç”ŸæˆäºŒç»´ç "æŒ‰é’®</li>
                <li>å¯å•ç‹¬ä¸‹è½½æ¯ä¸ªäºŒç»´ç ï¼Œæˆ–ç‚¹å‡»"ä¸‹è½½æ‰€æœ‰äºŒç»´ç "</li>
                <li>ç‚¹å‡»"æ‰“å°äºŒç»´ç "å¯ç›´æ¥æ‰“å°</li>
            </ul>
        </div>

        <div class="config-section">
            <div class="config-group">
                <label for="baseUrl">ğŸŒ ç½‘é¡µåŸºç¡€åœ°å€</label>
                <input 
                    type="text" 
                    id="baseUrl" 
                    value="http://192.168.0.167:8000"
                    placeholder="ä¾‹å¦‚: https://maya-gaolou.vercel.app æˆ– http://192.168.0.167:8000"
                >
            </div>

            <div class="config-group">
                <label for="qrSize">ğŸ“ äºŒç»´ç å°ºå¯¸(åƒç´ )</label>
                <input 
                    type="number" 
                    id="qrSize" 
                    value="200"
                    min="100"
                    max="500"
                >
            </div>
        </div>

        <div class="btn-group">
            <button class="btn-generate" onclick="generateQRCodes()">ğŸ¨ ç”ŸæˆäºŒç»´ç </button>
            <button class="btn-download-all" onclick="downloadAllQRCodes()">ğŸ’¾ ä¸‹è½½æ‰€æœ‰äºŒç»´ç </button>
            <button class="btn-print" onclick="window.print()">ğŸ–¨ï¸ æ‰“å°äºŒç»´ç </button>
        </div>

        <div id="qrcode-container" class="qrcode-grid"></div>
    </div>

    <script>
        // æ‰¹æ¬¡ç¼–å·åˆ—è¡¨ï¼ˆå¯¹åº”ä½ å›¾ç‰‡ä¸­çš„19ä¸ªäºŒç»´ç ï¼‰
        const batchCodes = [
            'A2103676', 'A2103677', 'A2103678', 'A2103679', 'A2103680', 'A2103681',
            'A2103682', 'A2103683', 'A2103684', 'A2103685', 'A2103686', 'A2103687',
            'A2103688', 'A2103689', 'A2103690', 'A2103691', 'A2103692', 'A2103693',
            'A2103694'
        ];

        let qrCodeInstances = [];

        function generateQRCodes() {
            const baseUrl = document.getElementById('baseUrl').value.trim();
            const qrSize = parseInt(document.getElementById('qrSize').value);
            const container = document.getElementById('qrcode-container');

            // æ¸…ç©ºå®¹å™¨
            container.innerHTML = '';
            qrCodeInstances = [];

            if (!baseUrl) {
                alert('è¯·è¾“å…¥ç½‘é¡µåœ°å€ï¼');
                return;
            }

            // ä¸ºæ¯ä¸ªæ‰¹æ¬¡ç”ŸæˆäºŒç»´ç 
            batchCodes.forEach((code, index) => {
                const url = `${baseUrl}/index.html?code=${code}`;
                
                // åˆ›å»ºäºŒç»´ç å®¹å™¨
                const itemDiv = document.createElement('div');
                itemDiv.className = 'qrcode-item';
                itemDiv.innerHTML = `
                    <div class="batch-code">${code}</div>
                    <div class="qrcode-wrapper" id="qrcode-${index}"></div>
                    <div class="qr-url">${url}</div>
                    <button class="btn-download" onclick="downloadQRCode(${index}, '${code}')">
                        ğŸ’¾ ä¸‹è½½
                    </button>
                `;
                container.appendChild(itemDiv);

                // ç”ŸæˆäºŒç»´ç 
                const qrcode = new QRCode(document.getElementById(`qrcode-${index}`), {
                    text: url,
                    width: qrSize,
                    height: qrSize,
                    colorDark: '#000000',
                    colorLight: '#ffffff',
                    correctLevel: QRCode.CorrectLevel.H
                });

                qrCodeInstances.push({
                    code: code,
                    element: qrcode,
                    index: index
                });
            });

            console.log(`âœ… æˆåŠŸç”Ÿæˆ ${batchCodes.length} ä¸ªäºŒç»´ç ï¼`);
        }

        function downloadQRCode(index, batchCode) {
            const canvas = document.querySelector(`#qrcode-${index} canvas`);
            if (!canvas) {
                alert('äºŒç»´ç æœªç”Ÿæˆï¼Œè¯·å…ˆç‚¹å‡»"ç”ŸæˆäºŒç»´ç "æŒ‰é’®');
                return;
            }

            const url = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = `QR_${batchCode}.png`;
            link.href = url;
            link.click();
        }

        function downloadAllQRCodes() {
            if (qrCodeInstances.length === 0) {
                alert('è¯·å…ˆç”ŸæˆäºŒç»´ç ï¼');
                return;
            }

            qrCodeInstances.forEach((item, index) => {
                setTimeout(() => {
                    downloadQRCode(item.index, item.code);
                }, index * 200); // æ¯ä¸ªä¸‹è½½é—´éš”200ms
            });

            console.log(`ğŸ‰ å¼€å§‹ä¸‹è½½ ${qrCodeInstances.length} ä¸ªäºŒç»´ç ...`);
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨ç”Ÿæˆ
        window.addEventListener('load', function() {
            generateQRCodes();
        });
    </script>
</body>
</html>
